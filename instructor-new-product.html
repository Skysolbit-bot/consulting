<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>새 상품등록 - 강사 플랫폼</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <a href="index.html" class="logo">강사 플랫폼</a>
                <ul class="nav-links">
                    <li><a href="instructor-dashboard.html">대시보드</a></li>
                    <li><a href="instructor-schedule.html">일정 관리</a></li>
                    <li><a href="instructor-products.html" class="active">상품 관리</a></li>
                    <li><a href="instructor-payment.html">정산 관리</a></li>
                    <li><a href="instructor-profile.html">프로필</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="container">
        <section class="products-section">
            <div class="section-header">
                <h1>새 상품등록</h1>
                <a href="instructor-products.html" class="btn btn-outline">
                    <i class="fas fa-arrow-left"></i> 상품 목록으로 돌아가기
                </a>
            </div>

            <div class="product-form-container">
                <div class="form-progress">
                    <div class="progress-step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">기본 정보</div>
                    </div>
                    <div class="progress-step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">상품 설명</div>
                    </div>
                    <div class="progress-step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">이미지 및 추가 정보</div>
                    </div>
                    <div class="progress-step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-label">판매 설정</div>
                    </div>
                    <div class="progress-step" data-step="5">
                        <div class="step-number">5</div>
                        <div class="step-label">미리보기</div>
                    </div>
                </div>

                <form id="productForm" class="product-form">
                    <input type="hidden" id="productId" name="productId">
                    <input type="hidden" id="productStatus" name="productStatus" value="pending">
                    
                    <!-- 기본 정보 섹션 -->
                    <div class="form-section active" id="section1">
                        <h3>기본 정보</h3>
                        <p class="section-description">상품의 기본적인 정보를 입력해주세요.</p>
                        
                        <div class="form-group">
                            <label for="title">상품명 <span class="required">*</span></label>
                            <input type="text" id="title" name="title" placeholder="상품명을 입력하세요" required>
                            <p class="form-text">고객이 처음 보게 되는 상품명입니다. 명확하고 매력적인 이름을 입력해주세요.</p>
                        </div>
                        <div class="form-group">
                            <label for="subtitle">부제목</label>
                            <input type="text" id="subtitle" name="subtitle" placeholder="부제목을 입력하세요">
                            <p class="form-text">상품명 아래에 표시되는 부제목입니다. 상품의 특징을 간략히 설명해주세요.</p>
                        </div>
                        <div class="form-group">
                            <label for="category">카테고리 <span class="required">*</span></label>
                            <select id="category" name="category" required>
                                <option value="">카테고리 선택</option>
                                <option value="문화">문화</option>
                                <option value="심리">심리</option>
                                <option value="예술">예술</option>
                                <option value="교육">교육</option>
                                <option value="체험">체험</option>
                                <option value="힐링">힐링</option>
                                <option value="취미">취미</option>
                                <option value="기타">기타</option>
                            </select>
                            <p class="form-text">상품의 주제와 가장 잘 맞는 카테고리를 선택해주세요.</p>
                        </div>
                        <div class="form-group">
                            <label for="price">가격 <span class="required">*</span></label>
                            <div class="price-input">
                                <input type="number" id="price" name="price" placeholder="가격을 입력하세요" required>
                                <span class="price-unit">원</span>
                            </div>
                            <p class="form-text">참가자 1인당 가격을 입력해주세요.</p>
                        </div>
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="minParticipants">최소 참여 인원 <span class="required">*</span></label>
                                <input type="number" id="minParticipants" name="minParticipants" placeholder="최소 인원" required>
                            </div>
                            <div class="form-group half">
                                <label for="maxParticipants">최대 참여 인원 <span class="required">*</span></label>
                                <input type="number" id="maxParticipants" name="maxParticipants" placeholder="최대 인원" required>
                            </div>
                        </div>
                        <p class="form-text">참여 가능한 최소/최대 인원을 설정해주세요.</p>
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="duration">소요 시간 <span class="required">*</span></label>
                                <input type="text" id="duration" name="duration" placeholder="예: 2시간" required>
                            </div>
                            <div class="form-group half">
                                <label for="location">장소</label>
                                <input type="text" id="location" name="location" placeholder="장소를 입력하세요">
                            </div>
                        </div>
                        <p class="form-text">상품 진행에 소요되는 시간과 장소를 입력해주세요.</p>
                    </div>

                    <!-- 상품 설명 섹션 -->
                    <div class="form-section" id="section2">
                        <h3>상품 설명</h3>
                        <p class="section-description">상품에 대한 상세한 설명을 입력해주세요.</p>
                        
                        <div class="form-group">
                            <label for="description">상품 소개 <span class="required">*</span></label>
                            <textarea id="description" name="description" rows="5" placeholder="상품에 대한 간략한 소개를 입력하세요" required></textarea>
                            <p class="form-text">고객이 상품을 이해하는 데 도움이 되는 핵심 정보를 입력해주세요.</p>
                        </div>
                        <div class="form-group">
                            <label for="curriculum">커리큘럼 <span class="required">*</span></label>
                            <textarea id="curriculum" name="curriculum" rows="5" placeholder="상세한 커리큘럼을 입력하세요" required></textarea>
                            <p class="form-text">상품의 진행 과정과 내용을 시간순으로 상세히 설명해주세요.</p>
                        </div>
                        <div class="form-group">
                            <label for="preparation">준비물</label>
                            <textarea id="preparation" name="preparation" rows="3" placeholder="참가자가 준비해야 할 물품을 입력하세요"></textarea>
                            <p class="form-text">참가자가 준비해야 할 물품이나 지참물을 입력해주세요.</p>
                        </div>
                        <div class="form-group">
                            <label for="notice">유의사항</label>
                            <textarea id="notice" name="notice" rows="3" placeholder="참가자에게 알려줄 유의사항을 입력하세요"></textarea>
                            <p class="form-text">참가 시 주의해야 할 사항이나 취소 정책 등을 입력해주세요.</p>
                        </div>
                    </div>

                    <!-- 이미지 및 추가 정보 섹션 -->
                    <div class="form-section" id="section3">
                        <h3>이미지 및 추가 정보</h3>
                        <p class="section-description">상품을 표현하는 이미지와 추가 정보를 입력해주세요.</p>
                        
                        <div class="form-group">
                            <label for="image">대표 이미지 <span class="required">*</span></label>
                            <div class="file-upload">
                                <input type="file" id="image" name="image" accept="image/*" required>
                                <div class="file-preview" id="imagePreview">
                                    <i class="fas fa-image"></i>
                                    <span>이미지 미리보기</span>
                                </div>
                            </div>
                            <p class="form-text">권장 크기: 1200 x 800 픽셀, 최대 5MB</p>
                        </div>
                        <div class="form-group">
                            <label for="additionalImages">추가 이미지 (최대 5개)</label>
                            <div class="file-upload">
                                <input type="file" id="additionalImages" name="additionalImages" accept="image/*" multiple>
                                <div class="file-preview" id="additionalImagesPreview">
                                    <i class="fas fa-images"></i>
                                    <span>추가 이미지 미리보기</span>
                                </div>
                            </div>
                            <p class="form-text">상품을 더 자세히 보여줄 수 있는 추가 이미지를 업로드해주세요.</p>
                        </div>
                        <div class="form-group">
                            <label for="tags">태그</label>
                            <input type="text" id="tags" name="tags" placeholder="쉼표로 구분하여 입력하세요 (예: 힐링, 명상, 스트레스해소)">
                            <p class="form-text">상품 검색에 도움이 되는 키워드를 입력해주세요.</p>
                        </div>
                    </div>

                    <!-- 판매 설정 섹션 -->
                    <div class="form-section" id="section4">
                        <h3>판매 설정</h3>
                        <p class="section-description">상품의 판매 기간과 상태를 설정해주세요.</p>
                        
                        <div class="form-group">
                            <label for="status">판매 상태</label>
                            <select id="status" name="status">
                                <option value="active">판매중</option>
                                <option value="inactive">판매중지</option>
                            </select>
                            <p class="form-text">신규 등록 시에는 자동으로 '심사대기' 상태로 설정됩니다.</p>
                        </div>
                        <div class="form-row">
                            <div class="form-group half">
                                <label for="startDate">판매 시작일</label>
                                <input type="date" id="startDate" name="startDate">
                            </div>
                            <div class="form-group half">
                                <label for="endDate">판매 종료일</label>
                                <input type="date" id="endDate" name="endDate">
                            </div>
                        </div>
                        <p class="form-text">상품을 판매할 기간을 설정해주세요. 설정하지 않으면 계속 판매됩니다.</p>
                    </div>

                    <!-- 미리보기 섹션 -->
                    <div class="form-section" id="section5">
                        <h3>상품 미리보기</h3>
                        <p class="section-description">입력하신 정보를 확인해주세요.</p>
                        
                        <div class="preview-card">
                            <div class="preview-image">
                                <img id="previewImage" src="https://via.placeholder.com/800x400" alt="상품 미리보기">
                            </div>
                            <div class="preview-info">
                                <h3 id="previewTitle">상품명</h3>
                                <p id="previewSubtitle" class="preview-subtitle">부제목</p>
                                <p id="previewCategory" class="preview-category">카테고리</p>
                                <p id="previewPrice" class="preview-price">0원</p>
                                <p id="previewParticipants" class="preview-participants">0명 참여 | 0~0명</p>
                                <p id="previewDuration" class="preview-duration">소요 시간: 0시간</p>
                                <p id="previewLocation" class="preview-location">장소: 미정</p>
                            </div>
                            <div class="preview-description">
                                <h4>상품 소개</h4>
                                <p id="previewDescription">상품 소개 내용이 여기에 표시됩니다.</p>
                                
                                <h4>커리큘럼</h4>
                                <p id="previewCurriculum">커리큘럼 내용이 여기에 표시됩니다.</p>
                                
                                <h4>준비물</h4>
                                <p id="previewPreparation">준비물 내용이 여기에 표시됩니다.</p>
                                
                                <h4>유의사항</h4>
                                <p id="previewNotice">유의사항 내용이 여기에 표시됩니다.</p>
                            </div>
                        </div>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="btn btn-outline" id="prevBtn" style="display: none;">이전</button>
                        <button type="button" class="btn btn-primary" id="nextBtn">다음</button>
                        <button type="submit" class="btn btn-success" id="submitBtn" style="display: none;">등록하기</button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <script>
        // 폼 단계 관리
        let currentStep = 1;
        const totalSteps = 5;
        
        // 다음 버튼 클릭 이벤트
        document.getElementById('nextBtn').addEventListener('click', function() {
            if (currentStep < totalSteps) {
                // 현재 단계의 필수 입력 필드 검증
                if (validateStep(currentStep)) {
                    // 현재 단계 숨기기
                    document.getElementById(`section${currentStep}`).classList.remove('active');
                    document.querySelector(`.progress-step[data-step="${currentStep}"]`).classList.remove('active');
                    
                    // 다음 단계로 이동
                    currentStep++;
                    
                    // 다음 단계 표시
                    document.getElementById(`section${currentStep}`).classList.add('active');
                    document.querySelector(`.progress-step[data-step="${currentStep}"]`).classList.add('active');
                    
                    // 이전 버튼 표시
                    document.getElementById('prevBtn').style.display = 'inline-flex';
                    
                    // 마지막 단계인 경우
                    if (currentStep === totalSteps) {
                        // 미리보기 데이터 업데이트
                        updatePreview();
                        // 다음 버튼 숨기기
                        document.getElementById('nextBtn').style.display = 'none';
                        // 제출 버튼 표시
                        document.getElementById('submitBtn').style.display = 'inline-flex';
                    }
                }
            }
        });
        
        // 이전 버튼 클릭 이벤트
        document.getElementById('prevBtn').addEventListener('click', function() {
            if (currentStep > 1) {
                // 현재 단계 숨기기
                document.getElementById(`section${currentStep}`).classList.remove('active');
                document.querySelector(`.progress-step[data-step="${currentStep}"]`).classList.remove('active');
                
                // 이전 단계로 이동
                currentStep--;
                
                // 이전 단계 표시
                document.getElementById(`section${currentStep}`).classList.add('active');
                document.querySelector(`.progress-step[data-step="${currentStep}"]`).classList.add('active');
                
                // 첫 단계인 경우 이전 버튼 숨기기
                if (currentStep === 1) {
                    document.getElementById('prevBtn').style.display = 'none';
                }
                
                // 다음 버튼 표시
                document.getElementById('nextBtn').style.display = 'inline-flex';
                // 제출 버튼 숨기기
                document.getElementById('submitBtn').style.display = 'none';
            }
        });
        
        // 단계별 유효성 검사
        function validateStep(step) {
            const section = document.getElementById(`section${step}`);
            const requiredFields = section.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    field.classList.add('error');
                } else {
                    field.classList.remove('error');
                }
            });
            
            if (!isValid) {
                alert('필수 항목을 모두 입력해주세요.');
            }
            
            return isValid;
        }
        
        // 미리보기 데이터 업데이트
        function updatePreview() {
            document.getElementById('previewTitle').textContent = document.getElementById('title').value;
            document.getElementById('previewSubtitle').textContent = document.getElementById('subtitle').value;
            document.getElementById('previewCategory').textContent = document.getElementById('category').value;
            document.getElementById('previewPrice').textContent = document.getElementById('price').value + '원';
            document.getElementById('previewParticipants').textContent = `0명 참여 | ${document.getElementById('minParticipants').value}~${document.getElementById('maxParticipants').value}명`;
            document.getElementById('previewDuration').textContent = `소요 시간: ${document.getElementById('duration').value}`;
            document.getElementById('previewLocation').textContent = `장소: ${document.getElementById('location').value || '미정'}`;
            document.getElementById('previewDescription').textContent = document.getElementById('description').value;
            document.getElementById('previewCurriculum').textContent = document.getElementById('curriculum').value;
            document.getElementById('previewPreparation').textContent = document.getElementById('preparation').value || '준비물 없음';
            document.getElementById('previewNotice').textContent = document.getElementById('notice').value || '유의사항 없음';
            
            // 이미지 미리보기
            const imageFile = document.getElementById('image').files[0];
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('previewImage').src = e.target.result;
                }
                reader.readAsDataURL(imageFile);
            }
        }
        
        // 이미지 미리보기 기능
        document.getElementById('image').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imagePreview').innerHTML = `<img src="${e.target.result}" alt="미리보기">`;
                }
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('additionalImages').addEventListener('change', function(e) {
            const files = e.target.files;
            if (files.length > 0) {
                let previewHTML = '';
                for (let i = 0; i < Math.min(files.length, 5); i++) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewHTML += `<div class="preview-item"><img src="${e.target.result}" alt="추가 이미지 ${i+1}"></div>`;
                        document.getElementById('additionalImagesPreview').innerHTML = previewHTML;
                    }
                    reader.readAsDataURL(files[i]);
                }
            }
        });
        
        // 폼 제출 처리
        document.getElementById('productForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 실제로는 서버에 데이터를 전송하는 코드가 들어갈 것입니다.
            // 여기서는 간단한 알림만 표시합니다.
            alert('상품이 등록되었습니다. 심사는 최소 5일이 소요됩니다.');
            
            // 상품 목록 페이지로 이동
            window.location.href = 'instructor-products.html';
        });
    </script>
</body>
</html> 